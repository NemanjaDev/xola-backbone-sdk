!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("backbone"),require("underscore")):"function"==typeof define&&define.amd?define(["backbone","underscore"],t):"object"==typeof exports?exports.XolaBackboneSDK=t(require("backbone"),require("underscore")):e.XolaBackboneSDK=t(e.Backbone,e._)}(this,function(e,t){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=void 0;var r=o(12),i=(n(r),o(3)),l=n(i);t.BaseModel=l.default.Model.extend({parent:null,parentUrlRoot:null,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,o=void 0===t?null:t;this.parent=o},url:function(e){var t=this.parent?this.parent.url(this.parentUrlRoot):"",o=void 0;if(e)if(this.isNew())o=e;else{var n=this.get(this.idAttribute);o=e.replace(/[^\/]$/,"$&/")+encodeURIComponent(n)}else o=l.default.Model.prototype.url.apply(this);return t+o},parse:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return console.log("PARSE",e),l.default.Model.prototype.parse.apply(this,arguments)}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCollection=void 0;var n=o(3),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=o(0);t.BaseCollection=r.default.Collection.extend({model:i.BaseModel,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,o=void 0===t?null:t;this.parent=o},url:function(){return(this.parent?this.parent.url():"")+this.model.prototype.urlRoot},parse:function(e){return e.hasOwnProperty("paging")&&e.hasOwnProperty("data")?e.data:e},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=r.default.Collection.prototype.get.apply(this,[e]);if(!o&&t){var n={};n[this.model.idAttribute]=e,o=new this.model(n),this.add(o)}return o}},{buildModelPropertyComparator:function(e){return function(t){return t.get(e)}}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Experience=void 0;var n=o(0);t.Experience=n.BaseModel.extend({urlRoot:"/experiences",defaults:{name:"Xxx"}})},function(t,o){t.exports=e},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.CollectionPool={getCollection:function(e){if(!e.hasOwnProperty("POOL_ID"))throw new Error(e+" is not a valid Collection");return n.hasOwnProperty(e.POOL_ID)||(n[e.POOL_ID]=new e),n[e.POOL_ID]}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n=o(0),r=o(10),i=o(2);t.Event=n.BaseModel.extend({urlRoot:"/events"},{PARSERS:{start_date:r.ParseHelper.Date,experience:r.ParseHelper.Model(i.Experience)}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventCollection=void 0;var n=o(1),r=o(5);t.EventCollection=n.BaseCollection.extend({model:r.Event})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperienceCollection=void 0;var n=o(1),r=o(2);t.ExperienceCollection=n.BaseCollection.extend({model:r.Experience},{POOL_ID:"Experiences"})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Seller=void 0;var n=o(0);t.Seller=n.BaseModel.extend({urlRoot:"/sellers"})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var n=o(0);t.User=n.BaseModel.extend({urlRoot:"/users"})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseHelper=void 0;var n=o(0),r=o(1),i=o(4);t.ParseHelper={Date:function(e){function t(t,o,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,o){return new Date(t)}),Model:function(e){return e.prototype instanceof r.BaseCollection?function(t,o,n){var r=e.prototype.model.prototype.idAttribute;return t&&t.id==o[r]||(t=i.CollectionPool.getCollection(e).get(o[r],!0)),t.set(o,n),t}:e.prototype instanceof n.BaseModel?function(t,o,n){return t||(t=new e),t.set(o,n),t}:void 0},Collection:function(e){return function(t,o){return new e(o)}}}},function(e,t,o){"use strict";var n=o(3),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=o(0),l=o(1),u=o(2),a=o(5),s=o(8),c=o(9),d=o(7),p=o(6),f=o(4),v={BaseModel:i.BaseModel,BaseCollection:l.BaseCollection,Model:{Experience:u.Experience,Event:a.Event,Seller:s.Seller,User:c.User},Collection:{Experiences:d.ExperienceCollection,Events:p.EventCollection},CollectionPool:f.CollectionPool,setBaseUrl:function(e){r.default.$.ajaxSetup({beforeSend:function(t,o){o.url=e+o.url,o.crossDomain=!0}})},setApiKey:function(e){var t=r.default.$.ajaxSetup().headers||{};e?t["X-API-KEY"]=e:delete t["X-API-KEY"],r.default.$.ajaxSetup(r.default.$.ajaxSettings,{headers:t})}};v.setBaseUrl("http://xola.com/api"),e.exports=v},function(e,o){e.exports=t}])});